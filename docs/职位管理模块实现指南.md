# èŒä½ç®¡ç†æ¨¡å—å®ç°æŒ‡å—

> **åˆ›å»ºæ—¶é—´**ï¼š2026-02-19
> **æ›´æ–°æ—¶é—´**ï¼š2026-02-19 (v2.0 - æ·»åŠ å»¶è¿ŸåŒåˆ )
> **ä¼˜å…ˆçº§**ï¼šé«˜
> **é¢„è®¡è€—æ—¶**ï¼š2-3 å°æ—¶
> **ä¾èµ–æ¨¡å—**ï¼šè®¤è¯æ¨¡å—ï¼ˆå·²å®Œæˆï¼‰

---

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

**åŠŸèƒ½æè¿°**ï¼š
å®ç°å®Œæ•´çš„èŒä½ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬èŒä½çš„å¢åˆ æ”¹æŸ¥ã€å‘å¸ƒ/å…³é—­ã€çƒ­é—¨èŒä½ç»Ÿè®¡ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚è¯¥æ¨¡å—æ˜¯ SmartATS ç³»ç»Ÿçš„æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ä¹‹ä¸€ã€‚

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. åˆ›å»ºèŒä½
2. èŒä½åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€æ’åºï¼‰
3. èŒä½è¯¦æƒ…
4. æ›´æ–°èŒä½
5. å‘å¸ƒ/å…³é—­èŒä½
6. åˆ é™¤èŒä½ï¼ˆè½¯åˆ é™¤ï¼‰
7. çƒ­é—¨èŒä½ç»Ÿè®¡

**æŠ€æœ¯äº®ç‚¹**ï¼š
- MyBatis-Plus CRUD æ“ä½œ
- Redis ç¼“å­˜ç­–ç•¥ï¼ˆ**å»¶è¿ŸåŒåˆ **ï¼‰
- åˆ†é¡µæŸ¥è¯¢
- JSON å­—æ®µå¤„ç†
- æƒé™æ§åˆ¶
- å¼‚æ­¥ä»»åŠ¡å¤„ç†

---

## ğŸ¯ å®ç°æ­¥éª¤

### æ­¥éª¤ 0ï¼šæ›´æ–° RedisKeyConstants.java

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/common/constants/RedisKeyConstants.java`

åœ¨ `ROLE_PREFIX` ä¹‹å‰æ·»åŠ èŒä½ç¼“å­˜ç›¸å…³å¸¸é‡ï¼š

```java
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
// èŒä½ç¼“å­˜ç›¸å…³
// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

/**
 * èŒä½è¯¦æƒ…ç¼“å­˜ Key å‰ç¼€
 * <p>
 * å®Œæ•´æ ¼å¼ï¼šcache:job:{jobId}
 * <p>
 * Valueï¼šJSON æ ¼å¼çš„èŒä½è¯¦æƒ…å¯¹è±¡
 * <p>
 * TTLï¼š30åˆ†é’Ÿ
 */
public static final String CACHE_JOB_KEY_PREFIX = "cache:job:";

/**
 * çƒ­é—¨èŒä½æ’è¡Œ Key
 * <p>
 * å®Œæ•´æ ¼å¼ï¼šcache:job:hot
 * <p>
 * Typeï¼šZSetï¼ˆæœ‰åºé›†åˆï¼‰
 * <p>
 * Scoreï¼šæµè§ˆæ¬¡æ•°
 * <p>
 * TTLï¼š10åˆ†é’Ÿ
 */
public static final String CACHE_JOB_HOT_KEY = "cache:job:hot";
```

---

### æ­¥éª¤ 1ï¼šåˆ›å»ºæ•°æ®åº“è¡¨

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/resources/sql/job.sql`

```sql
USE smartats;

-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-- åˆ›å»ºèŒä½è¡¨
-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CREATE TABLE `jobs` (
    `id` BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'èŒä½ID',
    `title` VARCHAR(100) NOT NULL COMMENT 'èŒä½æ ‡é¢˜',
    `department` VARCHAR(50) COMMENT 'éƒ¨é—¨',
    `description` TEXT NOT NULL COMMENT 'èŒä½æè¿°',
    `requirements` TEXT NOT NULL COMMENT 'ä»»èŒè¦æ±‚',
    `required_skills` JSON COMMENT 'å¿…éœ€æŠ€èƒ½æ ‡ç­¾ ["Java", "Spring"]',
    `salary_min` INT COMMENT 'è–ªèµ„ä¸‹é™(K)',
    `salary_max` INT COMMENT 'è–ªèµ„ä¸Šé™(K)',
    `experience_min` INT DEFAULT 0 COMMENT 'æœ€ä½ç»éªŒå¹´é™',
    `experience_max` INT COMMENT 'æœ€é«˜ç»éªŒå¹´é™',
    `education` VARCHAR(20) DEFAULT 'ä¸é™' COMMENT 'å­¦å†è¦æ±‚',
    `job_type` VARCHAR(20) DEFAULT 'FULL_TIME' COMMENT 'èŒä½ç±»å‹',
    `status` VARCHAR(20) DEFAULT 'DRAFT' COMMENT 'çŠ¶æ€ï¼šè‰ç¨¿/å·²å‘å¸ƒ/å·²å…³é—­',
    `creator_id` BIGINT NOT NULL COMMENT 'åˆ›å»ºè€…ID',
    `view_count` INT DEFAULT 0 COMMENT 'æµè§ˆæ¬¡æ•°',
    `deleted` TINYINT DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤æ ‡è®°',
    `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `updated_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX `idx_status` (`status`),
    INDEX `idx_creator` (`creator_id`),
    INDEX `idx_salary` (`salary_min`, `salary_max`),
    INDEX `idx_experience` (`experience_min`),
    FULLTEXT INDEX `ft_content` (`title`, `description`, `requirements`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='èŒä½è¡¨';

-- æ’å…¥æµ‹è¯•æ•°æ®
INSERT INTO `jobs` (`title`, `department`, `description`, `requirements`, `required_skills`,
                    `salary_min`, `salary_max`, `experience_min`, `experience_max`, `education`,
                    `job_type`, `status`, `creator_id`)
VALUES
('Javaåç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 'æŠ€æœ¯éƒ¨', 'è´Ÿè´£å…¬å¸æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤',
 '1. 3å¹´ä»¥ä¸ŠJavaå¼€å‘ç»éªŒ 2. ç†Ÿæ‚‰Spring Bootã€MyBatis 3. ç†Ÿæ‚‰MySQLã€Redis',
 '["Java", "Spring Boot", "MyBatis", "Redis", "MySQL"]', 15, 25, 3, 5, 'æœ¬ç§‘',
 'FULL_TIME', 'PUBLISHED', 1),

('å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 'æŠ€æœ¯éƒ¨', 'è´Ÿè´£å…¬å¸Webå‰ç«¯å¼€å‘',
 '1. 2å¹´ä»¥ä¸Šå‰ç«¯å¼€å‘ç»éªŒ 2. ç†Ÿæ‚‰Reactæˆ–Vue 3. ç†Ÿæ‚‰TypeScript',
 '["React", "Vue", "TypeScript", "JavaScript"]', 12, 20, 2, 4, 'æœ¬ç§‘',
 'FULL_TIME', 'PUBLISHED', 1),

('äº§å“ç»ç†', 'äº§å“éƒ¨', 'è´Ÿè´£å…¬å¸äº§å“è§„åˆ’å’Œè®¾è®¡',
 '1. 3å¹´ä»¥ä¸Šäº§å“ç»éªŒ 2. è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ› 3. ç†Ÿç»ƒä½¿ç”¨Axure',
 '["äº§å“è§„åˆ’", "Axure", "æ•°æ®åˆ†æ"]', 15, 30, 3, 8, 'æœ¬ç§‘',
 'FULL_TIME', 'DRAFT', 1);
```

**æ‰§è¡Œå‘½ä»¤**ï¼š
```bash
mysql -u root -p < src/main/resources/sql/job.sql
```

---

### æ­¥éª¤ 2ï¼šåˆ›å»ºæ¨¡å—ç›®å½•ç»“æ„

```bash
mkdir -p src/main/java/com/smartats/module/job/controller
mkdir -p src/main/java/com/smartats/module/job/service
mkdir -p src/main/java/com/smartats/module/job/mapper
mkdir -p src/main/java/com/smartats/module/job/entity
mkdir -p src/main/java/com/smartats/module/job/dto/request
mkdir -p src/main/java/com/smartats/module/job/dto/response
```

---

### æ­¥éª¤ 3ï¼šåˆ›å»ºå¼‚æ­¥é…ç½®ç±»

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/config/AsyncConfig.java`

```java
package com.smartats.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.scheduling.annotation.EnableAsync;
import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;

import java.util.concurrent.Executor;
import java.util.concurrent.ThreadPoolExecutor;

/**
 * å¼‚æ­¥ä»»åŠ¡é…ç½®
 * <p>
 * ç”¨äºå»¶è¿ŸåŒåˆ ç­‰å¼‚æ­¥åœºæ™¯
 */
@Configuration
@EnableAsync
public class AsyncConfig {

    @Bean("asyncExecutor")
    public Executor asyncExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();

        // æ ¸å¿ƒçº¿ç¨‹æ•°
        executor.setCorePoolSize(5);

        // æœ€å¤§çº¿ç¨‹æ•°
        executor.setMaxPoolSize(10);

        // é˜Ÿåˆ—å®¹é‡
        executor.setQueueCapacity(100);

        // çº¿ç¨‹åå‰ç¼€
        executor.setThreadNamePrefix("async-cache-");

        // æ‹’ç»ç­–ç•¥ï¼šç”±è°ƒç”¨çº¿ç¨‹æ‰§è¡Œ
        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());

        // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆåå†å…³é—­çº¿ç¨‹æ± 
        executor.setWaitForTasksToCompleteOnShutdown(true);

        executor.initialize();
        return executor;
    }
}
```

---

### æ­¥éª¤ 4ï¼šåˆ›å»ºå®ä½“ç±»

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/module/job/entity/Job.java`

```java
package com.smartats.module.job.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;

import java.time.LocalDateTime;

/**
 * èŒä½å®ä½“ç±»
 */
@Data
@TableName("jobs")
public class Job {

    @TableId(value = "id", type = IdType.AUTO)
    private Long id;

    private String title;
    private String department;
    private String description;
    private String requirements;
    private String requiredSkills;
    private Integer salaryMin;
    private Integer salaryMax;
    private Integer experienceMin;
    private Integer experienceMax;
    private String education;
    private String jobType;
    private String status;
    private Long creatorId;
    private Integer viewCount;

    @TableLogic
    private Integer deleted;

    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createdAt;

    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updatedAt;
}
```

---

### æ­¥éª¤ 5ï¼šåˆ›å»º DTO ç±»

#### 5.1 CreateJobRequest.java

```java
package com.smartats.module.job.dto.request;

import jakarta.validation.constraints.*;
import lombok.Data;
import java.util.List;

@Data
public class CreateJobRequest {
    @NotBlank(message = "èŒä½æ ‡é¢˜ä¸èƒ½ä¸ºç©º")
    private String title;

    private String department;

    @NotBlank(message = "èŒä½æè¿°ä¸èƒ½ä¸ºç©º")
    private String description;

    @NotBlank(message = "ä»»èŒè¦æ±‚ä¸èƒ½ä¸ºç©º")
    private String requirements;

    private List<String> requiredSkills;

    @NotNull(message = "è–ªèµ„ä¸‹é™ä¸èƒ½ä¸ºç©º")
    @Min(value = 0, message = "è–ªèµ„ä¸‹é™ä¸èƒ½å°äº0")
    private Integer salaryMin;

    @NotNull(message = "è–ªèµ„ä¸Šé™ä¸èƒ½ä¸ºç©º")
    @Min(value = 0, message = "è–ªèµ„ä¸Šé™ä¸èƒ½å°äº0")
    private Integer salaryMax;

    @Min(value = 0, message = "ç»éªŒå¹´é™ä¸èƒ½å°äº0")
    private Integer experienceMin;

    @Min(value = 0, message = "ç»éªŒå¹´é™ä¸èƒ½å°äº0")
    private Integer experienceMax;

    private String education;
    private String jobType;
}
```

#### 5.2 UpdateJobRequest.java

```java
package com.smartats.module.job.dto.request;

import jakarta.validation.constraints.Min;
import jakarta.validation.constraints.NotNull;
import lombok.Data;

@Data
public class UpdateJobRequest {
    @NotNull(message = "èŒä½IDä¸èƒ½ä¸ºç©º")
    private Long id;

    private String title;
    private String department;
    private String description;
    private String requirements;
    private java.util.List<String> requiredSkills;

    @Min(value = 0, message = "è–ªèµ„ä¸‹é™ä¸èƒ½å°äº0")
    private Integer salaryMin;

    @Min(value = 0, message = "è–ªèµ„ä¸Šé™ä¸èƒ½å°äº0")
    private Integer salaryMax;

    @Min(value = 0, message = "ç»éªŒå¹´é™ä¸èƒ½å°äº0")
    private Integer experienceMin;

    @Min(value = 0, message = "ç»éªŒå¹´é™ä¸èƒ½å°äº0")
    private Integer experienceMax;

    private String education;
    private String jobType;
}
```

#### 5.3 JobQueryRequest.java & JobResponse.java

ï¼ˆå‚è€ƒä¹‹å‰çš„ä»£ç ï¼Œä¿æŒä¸å˜ï¼‰

---

### æ­¥éª¤ 6ï¼šåˆ›å»º Mapper æ¥å£

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/module/job/mapper/JobMapper.java`

```java
package com.smartats.module.job.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.smartats.module.job.entity.Job;
import org.apache.ibatis.annotations.Mapper;

@Mapper
public interface JobMapper extends BaseMapper<Job> {
}
```

---

### æ­¥éª¤ 7ï¼šåˆ›å»º Service å±‚ï¼ˆå«å»¶è¿ŸåŒåˆ ï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/module/job/service/JobService.java`

```java
package com.smartats.module.job.service;

import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.smartats.common.constants.RedisKeyConstants;
import com.smartats.common.exception.BusinessException;
import com.smartats.common.result.ResultCode;
import com.smartats.module.job.dto.request.*;
import com.smartats.module.job.dto.response.JobResponse;
import com.smartats.module.job.entity.Job;
import com.smartats.module.job.mapper.JobMapper;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.BeanUtils;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.util.StringUtils;

import java.util.List;
import java.util.concurrent.TimeUnit;
import java.util.stream.Collectors;

@Slf4j
@Service
@RequiredArgsConstructor
public class JobService {

    private final JobMapper jobMapper;
    private final StringRedisTemplate redisTemplate;
    private final ObjectMapper objectMapper;

    /**
     * åˆ›å»ºèŒä½
     */
    @Transactional(rollbackFor = Exception.class)
    public Long createJob(CreateJobRequest request, Long creatorId) {
        log.info("åˆ›å»ºèŒä½ï¼štitle={}, creatorId={}", request.getTitle(), creatorId);

        Job job = new Job();
        BeanUtils.copyProperties(request, job);
        job.setCreatorId(creatorId);
        job.setStatus("DRAFT");
        job.setViewCount(0);

        // JSON åºåˆ—åŒ–ï¼šList<String> -> JSON å­—ç¬¦ä¸²
        if (request.getRequiredSkills() != null && !request.getRequiredSkills().isEmpty()) {
            try {
                job.setRequiredSkills(objectMapper.writeValueAsString(request.getRequiredSkills()));
            } catch (JsonProcessingException e) {
                log.error("æŠ€èƒ½æ ‡ç­¾åºåˆ—åŒ–å¤±è´¥", e);
                throw new BusinessException(ResultCode.INTERNAL_ERROR, "æŠ€èƒ½æ ‡ç­¾æ ¼å¼é”™è¯¯");
            }
        }

        int result = jobMapper.insert(job);
        if (result <= 0) {
            log.error("èŒä½åˆ›å»ºå¤±è´¥ï¼štitle={}", request.getTitle());
            throw new BusinessException(ResultCode.INTERNAL_ERROR, "èŒä½åˆ›å»ºå¤±è´¥");
        }

        log.info("èŒä½åˆ›å»ºæˆåŠŸï¼šid={}, title={}", job.getId(), job.getTitle());
        return job.getId();
    }

    /**
     * æ›´æ–°èŒä½ï¼ˆå»¶è¿ŸåŒåˆ ï¼‰
     */
    @Transactional(rollbackFor = Exception.class)
    public void updateJob(UpdateJobRequest request, Long operatorId) {
        log.info("æ›´æ–°èŒä½ï¼šid={}, operatorId={}", request.getId(), operatorId);

        String cacheKey = RedisKeyConstants.CACHE_JOB_KEY_PREFIX + request.getId();

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ç¬¬ 1 æ­¥ï¼šç¬¬ä¸€æ¬¡åˆ é™¤ç¼“å­˜ï¼ˆæ›´æ–°å‰ï¼‰
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        redisTemplate.delete(cacheKey);
        log.debug("ç¬¬ 1 æ¬¡åˆ é™¤ç¼“å­˜ï¼škey={}", cacheKey);

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ç¬¬ 2 æ­¥ï¼šæŸ¥è¯¢èŒä½æ˜¯å¦å­˜åœ¨
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        Job job = jobMapper.selectById(request.getId());
        if (job == null) {
            log.warn("èŒä½ä¸å­˜åœ¨ï¼šid={}", request.getId());
            throw new BusinessException(ResultCode.NOT_FOUND, "èŒä½ä¸å­˜åœ¨");
        }

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ç¬¬ 3 æ­¥ï¼šæ£€æŸ¥æƒé™
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        if (!job.getCreatorId().equals(operatorId)) {
            log.warn("æ— æƒé™ä¿®æ”¹èŒä½ï¼šjobId={}, creatorId={}, operatorId={}",
                    request.getId(), job.getCreatorId(), operatorId);
            throw new BusinessException(ResultCode.FORBIDDEN, "æ— æƒé™ä¿®æ”¹æ­¤èŒä½");
        }

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ç¬¬ 4 æ­¥ï¼šæ›´æ–°èŒä½ä¿¡æ¯
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        if (StringUtils.hasText(request.getTitle())) {
            job.setTitle(request.getTitle());
        }
        if (StringUtils.hasText(request.getDepartment())) {
            job.setDepartment(request.getDepartment());
        }
        if (StringUtils.hasText(request.getDescription())) {
            job.setDescription(request.getDescription());
        }
        if (StringUtils.hasText(request.getRequirements())) {
            job.setRequirements(request.getRequirements());
        }
        if (request.getRequiredSkills() != null) {
            try {
                job.setRequiredSkills(objectMapper.writeValueAsString(request.getRequiredSkills()));
            } catch (JsonProcessingException e) {
                log.error("æŠ€èƒ½æ ‡ç­¾åºåˆ—åŒ–å¤±è´¥", e);
                throw new BusinessException(ResultCode.INTERNAL_ERROR, "æŠ€èƒ½æ ‡ç­¾æ ¼å¼é”™è¯¯");
            }
        }
        if (request.getSalaryMin() != null) {
            job.setSalaryMin(request.getSalaryMin());
        }
        if (request.getSalaryMax() != null) {
            job.setSalaryMax(request.getSalaryMax());
        }
        if (request.getExperienceMin() != null) {
            job.setExperienceMin(request.getExperienceMin());
        }
        if (request.getExperienceMax() != null) {
            job.setExperienceMax(request.getExperienceMax());
        }
        if (request.getEducation() != null) {
            job.setEducation(request.getEducation());
        }
        if (request.getJobType() != null) {
            job.setJobType(request.getJobType());
        }

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ç¬¬ 5 æ­¥ï¼šæ›´æ–°æ•°æ®åº“
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        int result = jobMapper.updateById(job);
        if (result <= 0) {
            log.error("èŒä½æ›´æ–°å¤±è´¥ï¼šid={}", request.getId());
            throw new BusinessException(ResultCode.INTERNAL_ERROR, "èŒä½æ›´æ–°å¤±è´¥");
        }

        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
        // ç¬¬ 6 æ­¥ï¼šå»¶è¿ŸåŒåˆ ï¼ˆå¼‚æ­¥åˆ é™¤ç¼“å­˜ï¼‰
        // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

        asyncDeleteCache(cacheKey);

        log.info("èŒä½æ›´æ–°æˆåŠŸï¼šid={}", job.getId());
    }

    /**
     * å¼‚æ­¥å»¶è¿Ÿåˆ é™¤ç¼“å­˜ï¼ˆå»¶è¿ŸåŒåˆ ï¼‰
     *
     * @param cacheKey ç¼“å­˜ Key
     */
    @Async("asyncExecutor")
    public void asyncDeleteCache(String cacheKey) {
        try {
            // å»¶è¿Ÿ 500msï¼ˆå¤§äºè¯»è¯·æ±‚çš„è€—æ—¶ï¼‰
            Thread.sleep(500);

            redisTemplate.delete(cacheKey);
            log.debug("ç¬¬ 2 æ¬¡åˆ é™¤ç¼“å­˜ï¼ˆå»¶è¿Ÿï¼‰ï¼škey={}", cacheKey);

        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            log.error("å»¶è¿Ÿåˆ é™¤ç¼“å­˜å¤±è´¥ï¼škey={}", cacheKey, e);
        }
    }

    /**
     * è·å–èŒä½è¯¦æƒ…
     */
    public JobResponse getJobDetail(Long id) {
        log.info("æŸ¥è¯¢èŒä½è¯¦æƒ…ï¼šid={}", id);

        String cacheKey = RedisKeyConstants.CACHE_JOB_KEY_PREFIX + id;
        String cachedData = redisTemplate.opsForValue().get(cacheKey);

        if (cachedData != null) {
            try {
                return objectMapper.readValue(cachedData, JobResponse.class);
            } catch (JsonProcessingException e) {
                log.error("ç¼“å­˜æ•°æ®ååºåˆ—åŒ–å¤±è´¥", e);
            }
        }

        Job job = jobMapper.selectById(id);
        if (job == null) {
            log.warn("èŒä½ä¸å­˜åœ¨ï¼šid={}", id);
            throw new BusinessException(ResultCode.NOT_FOUND, "èŒä½ä¸å­˜åœ¨");
        }

        JobResponse response = convertToResponse(job);

        try {
            redisTemplate.opsForValue().set(cacheKey, objectMapper.writeValueAsString(response), 30, TimeUnit.MINUTES);
        } catch (JsonProcessingException e) {
            log.error("ç¼“å­˜æ•°æ®åºåˆ—åŒ–å¤±è´¥", e);
        }

        // å¼‚æ­¥æ›´æ–°æµè§ˆæ¬¡æ•°
        job.setViewCount(job.getViewCount() + 1);
        jobMapper.updateById(job);

        return response;
    }

    /**
     * èŒä½åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰
     */
    public Page<JobResponse> getJobList(JobQueryRequest request) {
        log.info("æŸ¥è¯¢èŒä½åˆ—è¡¨ï¼š{}", request);

        LambdaQueryWrapper<Job> queryWrapper = new LambdaQueryWrapper<>();

        if (StringUtils.hasText(request.getKeyword())) {
            queryWrapper.and(wrapper -> wrapper
                    .like(Job::getTitle, request.getKeyword())
                    .or()
                    .like(Job::getDescription, request.getKeyword())
                    .or()
                    .like(Job::getRequirements, request.getKeyword())
            );
        }

        if (StringUtils.hasText(request.getDepartment())) {
            queryWrapper.eq(Job::getDepartment, request.getDepartment());
        }

        if (StringUtils.hasText(request.getJobType())) {
            queryWrapper.eq(Job::getJobType, request.getJobType());
        }

        if (StringUtils.hasText(request.getEducation())) {
            queryWrapper.eq(Job::getEducation, request.getEducation());
        }

        if (request.getExperienceMin() != null) {
            queryWrapper.le(Job::getExperienceMin, request.getExperienceMin());
        }

        if (request.getSalaryMin() != null) {
            queryWrapper.ge(Job::getSalaryMin, request.getSalaryMin());
        }

        if (StringUtils.hasText(request.getStatus())) {
            queryWrapper.eq(Job::getStatus, request.getStatus());
        } else {
            queryWrapper.eq(Job::getStatus, "PUBLISHED");
        }

        // æ’åº
        if ("created_at".equals(request.getOrderBy())) {
            if ("asc".equals(request.getOrderDirection())) {
                queryWrapper.orderByAsc(Job::getCreatedAt);
            } else {
                queryWrapper.orderByDesc(Job::getCreatedAt);
            }
        } else if ("salary_max".equals(request.getOrderBy())) {
            if ("asc".equals(request.getOrderDirection())) {
                queryWrapper.orderByAsc(Job::getSalaryMax);
            } else {
                queryWrapper.orderByDesc(Job::getSalaryMax);
            }
        } else if ("view_count".equals(request.getOrderBy())) {
            if ("asc".equals(request.getOrderDirection())) {
                queryWrapper.orderByAsc(Job::getViewCount);
            } else {
                queryWrapper.orderByDesc(Job::getViewCount);
            }
        }

        Page<Job> page = new Page<>(request.getPageNum(), request.getPageSize());
        Page<Job> jobPage = jobMapper.selectPage(page, queryWrapper);

        Page<JobResponse> responsePage = new Page<>(jobPage.getCurrent(), jobPage.getSize(), jobPage.getTotal());
        List<JobResponse> responseList = jobPage.getRecords().stream()
                .map(this::convertToResponse)
                .collect(Collectors.toList());

        responsePage.setRecords(responseList);

        return responsePage;
    }

    /**
     * å‘å¸ƒèŒä½
     */
    @Transactional(rollbackFor = Exception.class)
    public void publishJob(Long id, Long operatorId) {
        log.info("å‘å¸ƒèŒä½ï¼šid={}, operatorId={}", id, operatorId);

        Job job = jobMapper.selectById(id);
        if (job == null) {
            throw new BusinessException(ResultCode.NOT_FOUND, "èŒä½ä¸å­˜åœ¨");
        }

        if (!job.getCreatorId().equals(operatorId)) {
            throw new BusinessException(ResultCode.FORBIDDEN, "æ— æƒé™æ“ä½œæ­¤èŒä½");
        }

        if ("PUBLISHED".equals(job.getStatus())) {
            throw new BusinessException(ResultCode.BAD_REQUEST, "èŒä½å·²ç»æ˜¯å‘å¸ƒçŠ¶æ€");
        }

        job.setStatus("PUBLISHED");
        jobMapper.updateById(job);

        // æ¸…é™¤ç¼“å­˜
        redisTemplate.delete(RedisKeyConstants.CACHE_JOB_KEY_PREFIX + id);

        log.info("èŒä½å‘å¸ƒæˆåŠŸï¼šid={}", id);
    }

    /**
     * å…³é—­èŒä½
     */
    @Transactional(rollbackFor = Exception.class)
    public void closeJob(Long id, Long operatorId) {
        log.info("å…³é—­èŒä½ï¼šid={}, operatorId={}", id, operatorId);

        Job job = jobMapper.selectById(id);
        if (job == null) {
            throw new BusinessException(ResultCode.NOT_FOUND, "èŒä½ä¸å­˜åœ¨");
        }

        if (!job.getCreatorId().equals(operatorId)) {
            throw new BusinessException(ResultCode.FORBIDDEN, "æ— æƒé™æ“ä½œæ­¤èŒä½");
        }

        if ("CLOSED".equals(job.getStatus())) {
            throw new BusinessException(ResultCode.BAD_REQUEST, "èŒä½å·²ç»æ˜¯å…³é—­çŠ¶æ€");
        }

        job.setStatus("CLOSED");
        jobMapper.updateById(job);

        // æ¸…é™¤ç¼“å­˜
        redisTemplate.delete(RedisKeyConstants.CACHE_JOB_KEY_PREFIX + id);

        log.info("èŒä½å…³é—­æˆåŠŸï¼šid={}", id);
    }

    /**
     * åˆ é™¤èŒä½ï¼ˆè½¯åˆ é™¤ï¼‰
     */
    @Transactional(rollbackFor = Exception.class)
    public void deleteJob(Long id, Long operatorId) {
        log.info("åˆ é™¤èŒä½ï¼šid={}, operatorId={}", id, operatorId);

        Job job = jobMapper.selectById(id);
        if (job == null) {
            throw new BusinessException(ResultCode.NOT_FOUND, "èŒä½ä¸å­˜åœ¨");
        }

        if (!job.getCreatorId().equals(operatorId)) {
            throw new BusinessException(ResultCode.FORBIDDEN, "æ— æƒé™æ“ä½œæ­¤èŒä½");
        }

        int result = jobMapper.deleteById(id);
        if (result <= 0) {
            throw new BusinessException(ResultCode.INTERNAL_ERROR, "èŒä½åˆ é™¤å¤±è´¥");
        }

        // æ¸…é™¤ç¼“å­˜
        redisTemplate.delete(RedisKeyConstants.CACHE_JOB_KEY_PREFIX + id);

        log.info("èŒä½åˆ é™¤æˆåŠŸï¼šid={}", id);
    }

    /**
     * çƒ­é—¨èŒä½åˆ—è¡¨
     */
    public List<JobResponse> getHotJobs(Integer limit) {
        log.info("æŸ¥è¯¢çƒ­é—¨èŒä½ï¼šlimit={}", limit);

        LambdaQueryWrapper<Job> queryWrapper = new LambdaQueryWrapper<>();
        queryWrapper.eq(Job::getStatus, "PUBLISHED")
                .orderByDesc(Job::getViewCount)
                .last("LIMIT " + (limit != null ? limit : 10));

        List<Job> jobs = jobMapper.selectList(queryWrapper);
        return jobs.stream()
                .map(this::convertToResponse)
                .collect(Collectors.toList());
    }

    /**
     * è½¬æ¢ä¸ºå“åº”å¯¹è±¡
     */
    private JobResponse convertToResponse(Job job) {
        JobResponse response = new JobResponse();
        BeanUtils.copyProperties(job, response);

        // JSON ååºåˆ—åŒ–ï¼šJSON å­—ç¬¦ä¸² -> List<String>
        if (StringUtils.hasText(job.getRequiredSkills())) {
            try {
                response.setRequiredSkills(
                        java.util.Arrays.stream(objectMapper.readValue(job.getRequiredSkills(), String[].class))
                                .collect(Collectors.toList())
                );
            } catch (JsonProcessingException e) {
                log.error("æŠ€èƒ½æ ‡ç­¾ååºåˆ—åŒ–å¤±è´¥", e);
            }
        }

        // æ ¼å¼åŒ–æ˜¾ç¤º
        if (job.getSalaryMin() != null && job.getSalaryMax() != null) {
            response.setSalaryRange(job.getSalaryMin() + "K-" + job.getSalaryMax() + "K");
        }

        if (job.getExperienceMin() != null && job.getExperienceMax() != null) {
            response.setExperienceRange(job.getExperienceMin() + "-" + job.getExperienceMax() + "å¹´");
        }

        // çŠ¶æ€æè¿°
        if ("DRAFT".equals(job.getStatus())) {
            response.setStatusDesc("è‰ç¨¿");
        } else if ("PUBLISHED".equals(job.getStatus())) {
            response.setStatusDesc("å·²å‘å¸ƒ");
        } else if ("CLOSED".equals(job.getStatus())) {
            response.setStatusDesc("å·²å…³é—­");
        }

        return response;
    }
}
```

---

### æ­¥éª¤ 8ï¼šåˆ›å»º Controller å±‚

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/module/job/controller/JobController.java`

ï¼ˆå‚è€ƒä¹‹å‰çš„ä»£ç ï¼Œä¿æŒä¸å˜ï¼‰

---

### æ­¥éª¤ 9ï¼šæ›´æ–° SecurityConfig

**æ–‡ä»¶ä½ç½®**ï¼š`src/main/java/com/smartats/config/SecurityConfig.java`

```java
.authorizeHttpRequests(auth -> auth
        // è®¤è¯æ¥å£
        .requestMatchers(HttpMethod.POST, "/auth/register").permitAll()
        .requestMatchers(HttpMethod.POST, "/auth/login").permitAll()
        .requestMatchers(HttpMethod.POST, "/auth/send-verification-code").permitAll()

        // èŒä½æ¥å£ï¼ˆè¯¦æƒ…å’Œåˆ—è¡¨å…è®¸åŒ¿åè®¿é—®ï¼‰
        .requestMatchers(HttpMethod.GET, "/jobs/**").permitAll()

        // å…¶ä»–æ¥å£éœ€è¦è®¤è¯
        .anyRequest().authenticated()
)
```

---

## ğŸ“Š å»¶è¿ŸåŒåˆ è¯¦è§£

### ä¸ºä»€ä¹ˆéœ€è¦å»¶è¿ŸåŒåˆ ï¼Ÿ

**é—®é¢˜åœºæ™¯**ï¼ˆæ™®é€šåˆ é™¤ç¼“å­˜ï¼‰ï¼š

```
æ—¶é—´çº¿ï¼š
t1: çº¿ç¨‹A æ›´æ–°æ•°æ®åº“
t2: çº¿ç¨‹B æŸ¥è¯¢ç¼“å­˜ï¼ˆæœªå‘½ä¸­ï¼‰â†’ æŸ¥è¯¢æ•°æ®åº“ï¼ˆæ—§æ•°æ®ï¼‰â†’ å†™å…¥ç¼“å­˜ï¼ˆæ—§æ•°æ®ï¼‰
t3: çº¿ç¨‹A åˆ é™¤ç¼“å­˜

ç»“æœï¼šç¼“å­˜ä¸­æ˜¯æ—§æ•°æ® âŒ
```

**å»¶è¿ŸåŒåˆ æ–¹æ¡ˆ**ï¼š

```
æ—¶é—´çº¿ï¼š
t1: çº¿ç¨‹A åˆ é™¤ç¼“å­˜ï¼ˆç¬¬1æ¬¡ï¼‰
t2: çº¿ç¨‹A æ›´æ–°æ•°æ®åº“
t3: çº¿ç¨‹B æŸ¥è¯¢ç¼“å­˜ï¼ˆæœªå‘½ä¸­ï¼‰â†’ æŸ¥è¯¢æ•°æ®åº“ï¼ˆæ–°æ•°æ®ï¼‰â†’ å†™å…¥ç¼“å­˜ï¼ˆæ–°æ•°æ®ï¼‰
t4: å»¶è¿Ÿ 500ms...
t5: çº¿ç¨‹A åˆ é™¤ç¼“å­˜ï¼ˆç¬¬2æ¬¡ï¼Œå¼‚æ­¥ï¼‰
t6: ä¸‹æ¬¡æŸ¥è¯¢æ—¶é‡æ–°åŠ è½½æœ€æ–°æ•°æ®

ç»“æœï¼šä¿è¯ä¸€è‡´æ€§ âœ…
```

### å®ç°è¦ç‚¹

| è¦ç‚¹ | è¯´æ˜ |
|-----|------|
| **ç¬¬1æ¬¡åˆ é™¤** | æ›´æ–°å‰åˆ é™¤ï¼Œé¿å…æ—§æ•°æ®è¢«è¯»å– |
| **æ›´æ–°æ•°æ®åº“** | å†™å…¥æœ€æ–°æ•°æ® |
| **å»¶è¿Ÿåˆ é™¤** | å»¶è¿Ÿ 500ms åå†æ¬¡åˆ é™¤ï¼ˆå¼‚æ­¥ï¼‰ |
| **å»¶è¿Ÿæ—¶é—´** | å¤§äºè¯»è¯·æ±‚çš„è€—æ—¶ï¼ˆé€šå¸¸ 500ms-1sï¼‰ |
| **å¼‚æ­¥æ‰§è¡Œ** | ä¸é˜»å¡ä¸»æµç¨‹ï¼Œä½¿ç”¨ç‹¬ç«‹çº¿ç¨‹æ±  |

---

## ğŸ§ª æµ‹è¯•æ–¹æ¡ˆ

### æµ‹è¯• 1ï¼šåˆ›å»ºèŒä½

```bash
TOKEN=$(curl -s -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "testuser", "password": "Password123!"}' | jq -r '.data.accessToken')

curl -X POST http://localhost:8080/api/v1/jobs \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{
    "title": "Javaåç«¯å¼€å‘å·¥ç¨‹å¸ˆ",
    "department": "æŠ€æœ¯éƒ¨",
    "description": "è´Ÿè´£å…¬å¸æ ¸å¿ƒä¸šåŠ¡ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤",
    "requirements": "1. 3å¹´ä»¥ä¸ŠJavaå¼€å‘ç»éªŒ\n2. ç†Ÿæ‚‰Spring Bootã€MyBatis",
    "requiredSkills": ["Java", "Spring Boot", "MyBatis", "Redis"],
    "salaryMin": 15,
    "salaryMax": 25,
    "experienceMin": 3,
    "experienceMax": 5,
    "education": "æœ¬ç§‘",
    "jobType": "FULL_TIME"
  }'
```

### æµ‹è¯• 2ï¼šæŸ¥è¯¢èŒä½åˆ—è¡¨

```bash
curl -X GET "http://localhost:8080/api/v1/jobs?pageNum=1&pageSize=10&orderBy=created_at&orderDirection=desc"
```

### æµ‹è¯• 3ï¼šæŸ¥è¯¢èŒä½è¯¦æƒ…

```bash
curl -X GET http://localhost:8080/api/v1/jobs/1
```

### æµ‹è¯• 4ï¼šéªŒè¯ç¼“å­˜

```bash
# è¿æ¥ Redis
redis-cli -h 127.0.0.1 -p 6379 -a redis123

# æŸ¥çœ‹èŒä½ç¼“å­˜
127.0.0.1:6379> KEYS cache:job:*
1) "cache:job:1"

# æŸ¥çœ‹è¿‡æœŸæ—¶é—´
127.0.0.1:6379> TTL cache:job:1
(integer) 1795  # å‰©ä½™ç§’æ•°
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. JSON å­—æ®µå¤„ç†

```java
// å†™å…¥ï¼šList -> JSON å­—ç¬¦ä¸²
job.setRequiredSkills(objectMapper.writeValueAsString(request.getRequiredSkills()));

// è¯»å–ï¼šJSON å­—ç¬¦ä¸² -> List
response.setRequiredSkills(Arrays.stream(objectMapper.readValue(job.getRequiredSkills(), String[].class)));
```

### 2. å»¶è¿ŸåŒåˆ çš„é€‚ç”¨åœºæ™¯

âœ… **é€‚ç”¨**ï¼š
- è¯»å¤šå†™å°‘çš„åœºæ™¯
- å¯¹ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯

âŒ **ä¸é€‚ç”¨**ï¼š
- å†™é¢‘ç¹çš„åœºæ™¯ï¼ˆæ¯æ¬¡æ›´æ–°éƒ½è¦å»¶è¿Ÿåˆ é™¤ï¼‰
- å¼ºä¸€è‡´æ€§åœºæ™¯ï¼ˆéœ€è¦ç”¨åˆ†å¸ƒå¼é”ï¼‰

### 3. ç¼“å­˜ Key è§„èŒƒ

```java
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ RedisKeyConstants
String cacheKey = RedisKeyConstants.CACHE_JOB_KEY_PREFIX + jobId;

// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç 
String cacheKey = "cache:job:" + jobId;

// âŒ é”™è¯¯ï¼šç”¨ replace æ‹¼æ¥
String cacheKey = RedisKeyConstants.JWT_TOKEN_KEY_PREFIX.replace("jwt:token:", "cache:job:") + jobId;
```

---

## ğŸš€ å¾…å®ç°çš„ä¼˜åŒ–å’Œæ‰©å±•åŠŸèƒ½

### ä¸€ã€å½“å‰å®ç°çš„ä¼˜åŒ–ç‚¹ï¼ˆæŠ€æœ¯å€ºåŠ¡ï¼‰

#### 1.1 ç¼“å­˜ä¼˜åŒ–

**é—®é¢˜**ï¼šçƒ­é—¨èŒä½åˆ—è¡¨æ¯æ¬¡éƒ½æŸ¥è¯¢æ•°æ®åº“

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```java
/**
 * çƒ­é—¨èŒä½åˆ—è¡¨ï¼ˆæ·»åŠ ç¼“å­˜ï¼‰
 */
public List<JobResponse> getHotJobs(Integer limit) {
    String cacheKey = RedisKeyConstants.CACHE_JOB_HOT_KEY;

    // å…ˆæŸ¥ç¼“å­˜
    String cachedData = redisTemplate.opsForValue().get(cacheKey);
    if (cachedData != null) {
        try {
            return Arrays.stream(objectMapper.readValue(cachedData, JobResponse[].class))
                    .collect(Collectors.toList());
        } catch (JsonProcessingException e) {
            log.error("ç¼“å­˜æ•°æ®ååºåˆ—åŒ–å¤±è´¥", e);
        }
    }

    // ç¼“å­˜æœªå‘½ä¸­ï¼ŒæŸ¥è¯¢æ•°æ®åº“
    LambdaQueryWrapper<Job> queryWrapper = new LambdaQueryWrapper<>();
    queryWrapper.eq(Job::getStatus, "PUBLISHED")
            .orderByDesc(Job::getViewCount)
            .last("LIMIT " + (limit != null ? limit : 10));

    List<Job> jobs = jobMapper.selectList(queryWrapper);
    List<JobResponse> responseList = jobs.stream()
            .map(this::convertToResponse)
            .collect(Collectors.toList());

    // å›å¡«ç¼“å­˜ï¼ˆTTL 10åˆ†é’Ÿï¼‰
    try {
        redisTemplate.opsForValue().set(cacheKey,
            objectMapper.writeValueAsString(responseList),
            10, TimeUnit.MINUTES);
    } catch (JsonProcessingException e) {
        log.error("ç¼“å­˜æ•°æ®åºåˆ—åŒ–å¤±è´¥", e);
    }

    return responseList;
}
```

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š30åˆ†é’Ÿ

---

#### 1.2 åˆ†é¡µå‚æ•°æ ¡éªŒ

**é—®é¢˜**ï¼šç”¨æˆ·å¯èƒ½ä¼ å…¥è´Ÿæ•°æˆ–è¿‡å¤§çš„åˆ†é¡µå‚æ•°

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```java
public Page<JobResponse> getJobList(JobQueryRequest request) {
    // å‚æ•°æ ¡éªŒå’Œä¿®æ­£
    if (request.getPageNum() == null || request.getPageNum() < 1) {
        request.setPageNum(1);
    }
    if (request.getPageSize() == null || request.getPageSize() < 1) {
        request.setPageSize(10);
    }
    if (request.getPageSize() > 100) {
        request.setPageSize(100); // é™åˆ¶æœ€å¤§æ¯é¡µæ•°é‡
    }

    // ... åŸæœ‰é€»è¾‘ ...
}
```

**ä¼˜å…ˆçº§**ï¼šé«˜
**é¢„è®¡è€—æ—¶**ï¼š15åˆ†é’Ÿ

---

#### 1.3 æµè§ˆæ¬¡æ•°å¼‚æ­¥æ›´æ–°

**é—®é¢˜**ï¼š`getJobDetail()` ä¸­åŒæ­¥æ›´æ–°æµè§ˆæ¬¡æ•°å½±å“å“åº”é€Ÿåº¦

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```java
/**
 * å¼‚æ­¥æ›´æ–°æµè§ˆæ¬¡æ•°
 */
@Async("asyncExecutor")
public void asyncIncrementViewCount(Long jobId) {
    jobMapper.incrementViewCount(jobId);
}

// åœ¨ JobMapper ä¸­æ·»åŠ 
@Mapper
public interface JobMapper extends BaseMapper<Job> {
    @Update("UPDATE jobs SET view_count = view_count + 1 WHERE id = #{id}")
    void incrementViewCount(@Param("id") Long id);
}
```

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š30åˆ†é’Ÿ

---

### äºŒã€åŠŸèƒ½æ‰©å±•ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

#### 2.1 èŒä½å¤åˆ¶åŠŸèƒ½ â­â­â­

**åŠŸèƒ½æè¿°**ï¼šå¿«é€Ÿå¤åˆ¶å·²æœ‰èŒä½åˆ›å»ºæ–°èŒä½

**æ¥å£**ï¼š
```java
/**
 * å¤åˆ¶èŒä½
 * POST /api/v1/jobs/{id}/copy
 */
@PostMapping("/{id}/copy")
public Result<Long> copyJob(@PathVariable Long id, Authentication authentication) {
    Long creatorId = (Long) authentication.getPrincipal();
    Long newJobId = jobService.copyJob(id, creatorId);
    return Result.success(newJobId);
}
```

**Service å®ç°**ï¼š
```java
@Transactional(rollbackFor = Exception.class)
public Long copyJob(Long sourceJobId, Long creatorId) {
    // æŸ¥è¯¢åŸèŒä½
    Job sourceJob = jobMapper.selectById(sourceJobId);
    if (sourceJob == null) {
        throw new BusinessException(ResultCode.NOT_FOUND, "èŒä½ä¸å­˜åœ¨");
    }

    // æ£€æŸ¥æƒé™
    if (!sourceJob.getCreatorId().equals(creatorId)) {
        throw new BusinessException(ResultCode.FORBIDDEN, "æ— æƒé™å¤åˆ¶æ­¤èŒä½");
    }

    // åˆ›å»ºæ–°èŒä½ï¼ˆå¤åˆ¶å†…å®¹ï¼‰
    Job newJob = new Job();
    BeanUtils.copyProperties(sourceJob, newJob, "id", "createdAt", "updatedAt", "viewCount");
    newJob.setTitle(sourceJob.getTitle() + " (å‰¯æœ¬)");
    newJob.setCreatorId(creatorId);
    newJob.setStatus("DRAFT");
    newJob.setViewCount(0);

    jobMapper.insert(newJob);

    log.info("èŒä½å¤åˆ¶æˆåŠŸï¼šsourceId={}, newId={}", sourceJobId, newJob.getId());
    return newJob.getId();
}
```

**ä¼˜å…ˆçº§**ï¼šâ­â­â­ é«˜
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

---

#### 2.2 èŒä½æ‰¹é‡æ“ä½œ â­â­â­

**åŠŸèƒ½æè¿°**ï¼šæ‰¹é‡å‘å¸ƒã€å…³é—­ã€åˆ é™¤èŒä½

**æ¥å£**ï¼š
```java
/**
 * æ‰¹é‡å‘å¸ƒèŒä½
 * POST /api/v1/jobs/batch/publish
 */
@PostMapping("/batch/publish")
public Result<Map<String, Integer>> batchPublish(@RequestBody BatchOperationRequest request,
                                                Authentication authentication) {
    Long operatorId = (Long) authentication.getPrincipal();
    Map<String, Integer> result = jobService.batchPublish(request.getIds(), operatorId);
    return Result.success(result);
}

/**
 * æ‰¹é‡åˆ é™¤èŒä½
 * DELETE /api/v1/jobs/batch
 */
@DeleteMapping("/batch")
public Result<Map<String, Integer>> batchDelete(@RequestBody BatchOperationRequest request,
                                               Authentication authentication) {
    Long operatorId = (Long) authentication.getPrincipal();
    Map<String, Integer> result = jobService.batchDelete(request.getIds(), operatorId);
    return Result.success(result);
}
```

**DTO**ï¼š
```java
@Data
public class BatchOperationRequest {
    @NotEmpty(message = "èŒä½IDåˆ—è¡¨ä¸èƒ½ä¸ºç©º")
    @Size(max = 50, message = "å•æ¬¡æœ€å¤šæ“ä½œ50ä¸ªèŒä½")
    private List<Long> ids;
}
```

**ä¼˜å…ˆçº§**ï¼šâ­â­â­ é«˜
**é¢„è®¡è€—æ—¶**ï¼š1.5å°æ—¶

---

#### 2.3 èŒä½çŠ¶æ€æµè½¬è®°å½• â­â­

**åŠŸèƒ½æè¿°**ï¼šè®°å½•èŒä½çŠ¶æ€å˜æ›´å†å²ï¼ˆè°åœ¨ä»€ä¹ˆæ—¶é—´åšäº†ä»€ä¹ˆæ“ä½œï¼‰

**æ•°æ®åº“è¡¨**ï¼š
```sql
CREATE TABLE `job_status_logs` (
    `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
    `job_id` BIGINT NOT NULL COMMENT 'èŒä½ID',
    `old_status` VARCHAR(20) COMMENT 'åŸçŠ¶æ€',
    `new_status` VARCHAR(20) COMMENT 'æ–°çŠ¶æ€',
    `operator_id` BIGINT NOT NULL COMMENT 'æ“ä½œè€…ID',
    `operation_type` VARCHAR(50) COMMENT 'æ“ä½œç±»å‹ï¼šPUBLISH/CLOSE/REOPEN',
    `remark` VARCHAR(500) COMMENT 'å¤‡æ³¨',
    `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    INDEX `idx_job_id` (`job_id`),
    INDEX `idx_operator_id` (`operator_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='èŒä½çŠ¶æ€å˜æ›´æ—¥å¿—';
```

**Service æ–¹æ³•**ï¼š
```java
private void recordStatusChange(Long jobId, String oldStatus, String newStatus,
                                Long operatorId, String operationType) {
    JobStatusLog log = new JobStatusLog();
    log.setJobId(jobId);
    log.setOldStatus(oldStatus);
    log.setNewStatus(newStatus);
    log.setOperatorId(operatorId);
    log.setOperationType(operationType);

    jobStatusLogMapper.insert(log);
}
```

**ä¼˜å…ˆçº§**ï¼šâ­â­ ä¸­
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

---

#### 2.4 èŒä½æ”¶è—åŠŸèƒ½ â­â­

**åŠŸèƒ½æè¿°**ï¼šç”¨æˆ·å¯ä»¥æ”¶è—æ„Ÿå…´è¶£çš„èŒä½

**æ•°æ®åº“è¡¨**ï¼š
```sql
CREATE TABLE `job_bookmarks` (
    `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
    `user_id` BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
    `job_id` BIGINT NOT NULL COMMENT 'èŒä½ID',
    `created_at` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    UNIQUE INDEX `uk_user_job` (`user_id`, `job_id`),
    INDEX `idx_user_id` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='èŒä½æ”¶è—';
```

**æ¥å£**ï¼š
```java
/**
 * æ”¶è—èŒä½
 * POST /api/v1/jobs/{id}/bookmark
 */
@PostMapping("/{id}/bookmark")
public Result<Void> bookmarkJob(@PathVariable Long id, Authentication authentication) {
    Long userId = (Long) authentication.getPrincipal();
    jobService.bookmarkJob(id, userId);
    return Result.success();
}

/**
 * å–æ¶ˆæ”¶è—
 * DELETE /api/v1/jobs/{id}/bookmark
 */
@DeleteMapping("/{id}/bookmark")
public Result<Void> unbookmarkJob(@PathVariable Long id, Authentication authentication) {
    Long userId = (Long) authentication.getPrincipal();
    jobService.unbookmarkJob(id, userId);
    return Result.success();
}

/**
 * æˆ‘çš„æ”¶è—åˆ—è¡¨
 * GET /api/v1/jobs/bookmarks
 */
@GetMapping("/bookmarks")
public Result<Page<JobResponse>> getMyBookmarks(@RequestParam(defaultValue = "1") Integer pageNum,
                                                  @RequestParam(defaultValue = "10") Integer pageSize,
                                                  Authentication authentication) {
    Long userId = (Long) authentication.getPrincipal();
    Page<JobResponse> page = jobService.getBookmarkedJobs(userId, pageNum, pageSize);
    return Result.success(page);
}
```

**ä¼˜å…ˆçº§**ï¼šâ­â­ ä¸­
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

---

#### 2.5 èŒä½ç”³è¯·ç»Ÿè®¡ â­â­

**åŠŸèƒ½æè¿°**ï¼šæŸ¥çœ‹æ¯ä¸ªèŒä½çš„ç”³è¯·äººæ•°ã€æµè§ˆé‡ã€è½¬åŒ–ç‡

**æ¥å£**ï¼š
```java
/**
 * èŒä½ç»Ÿè®¡æ•°æ®
 * GET /api/v1/jobs/{id}/statistics
 */
@GetMapping("/{id}/statistics")
public Result<JobStatisticsResponse> getJobStatistics(@PathVariable Long id,
                                                     Authentication authentication) {
    Long operatorId = (Long) authentication.getPrincipal();
    JobStatisticsResponse stats = jobService.getJobStatistics(id, operatorId);
    return Result.success(stats);
}
```

**å“åº”å¯¹è±¡**ï¼š
```java
@Data
public class JobStatisticsResponse {
    private Long jobId;
    private String jobTitle;
    private Integer viewCount;          // æµè§ˆæ¬¡æ•°
    private Integer applicationCount;   // ç”³è¯·äººæ•°
    private Integer bookmarkCount;      // æ”¶è—æ¬¡æ•°
    private Double conversionRate;      // è½¬åŒ–ç‡ï¼ˆç”³è¯·/æµè§ˆï¼‰
    private LocalDateTime publishedAt;  // å‘å¸ƒæ—¶é—´
    private Integer daysSincePublish;   // å‘å¸ƒå¤©æ•°
}
```

**ä¼˜å…ˆçº§**ï¼šâ­â­ ä¸­
**é¢„è®¡è€—æ—¶**ï¼š1.5å°æ—¶

---

#### 2.6 èŒä½æœç´¢å¢å¼ºï¼ˆElasticsearchï¼‰â­

**åŠŸèƒ½æè¿°**ï¼šé›†æˆ Elasticsearch å®ç°å…¨æ–‡æœç´¢å’Œæ™ºèƒ½æ¨è

**åŠŸèƒ½ç‚¹**ï¼š
- å…¨æ–‡æœç´¢ï¼ˆæ ‡é¢˜ã€æè¿°ã€è¦æ±‚ï¼‰
- æœç´¢å»ºè®®/è‡ªåŠ¨è¡¥å…¨
- æœç´¢å†å²è®°å½•
- çƒ­é—¨æœç´¢è¯ç»Ÿè®¡
- ç›¸ä¼¼èŒä½æ¨è

**æŠ€æœ¯æ ˆ**ï¼š
- Spring Boot + Elasticsearch
- IK åˆ†è¯å™¨ï¼ˆä¸­æ–‡åˆ†è¯ï¼‰
- Logstashï¼ˆæ•°æ®åŒæ­¥ï¼‰

**ä¼˜å…ˆçº§**ï¼šâ­ ä½ï¼ˆå¤§å‹åŠŸèƒ½ï¼Œç‹¬ç«‹æ¨¡å—ï¼‰
**é¢„è®¡è€—æ—¶**ï¼š2-3å¤©

---

#### 2.7 èŒä½æ¨èå¼•æ“ â­

**åŠŸèƒ½æè¿°**ï¼šåŸºäºç”¨æˆ·ç”»åƒå’Œè¡Œä¸ºæ•°æ®æ¨èåˆé€‚èŒä½

**ç®—æ³•æ–¹å‘**ï¼š
- åŸºäºå†…å®¹çš„æ¨èï¼ˆç›¸ä¼¼èŒä½ï¼‰
- ååŒè¿‡æ»¤ï¼ˆç›¸ä¼¼ç”¨æˆ·å–œæ¬¢çš„èŒä½ï¼‰
- çƒ­åº¦æ¨èï¼ˆçƒ­é—¨èŒä½ï¼‰

**æ¥å£**ï¼š
```java
/**
 * ä¸ºæˆ‘æ¨è
 * GET /api/v1/jobs/recommendations
 */
@GetMapping("/recommendations")
public Result<List<JobResponse>> getRecommendations(Authentication authentication) {
    Long userId = (Long) authentication.getPrincipal();
    List<JobResponse> jobs = jobService.recommendJobs(userId);
    return Result.success(jobs);
}
```

**ä¼˜å…ˆçº§**ï¼šâ­ ä½ï¼ˆç®—æ³•æ¨¡å—ï¼Œç‹¬ç«‹å¼€å‘ï¼‰
**é¢„è®¡è€—æ—¶**ï¼š3-5å¤©

---

#### 2.8 èŒä½æ•°æ®åˆ†æçœ‹æ¿ â­

**åŠŸèƒ½æè¿°**ï¼šå¯è§†åŒ–æ•°æ®åˆ†æä»ªè¡¨ç›˜

**åŠŸèƒ½ç‚¹**ï¼š
- èŒä½å‘å¸ƒè¶‹åŠ¿å›¾
- èŒä½ç±»å‹åˆ†å¸ƒ
- è–ªèµ„åŒºé—´åˆ†å¸ƒ
- å­¦å†è¦æ±‚åˆ†å¸ƒ
- ç»éªŒè¦æ±‚åˆ†å¸ƒ
- çƒ­é—¨èŒä½æ’è¡Œ

**æŠ€æœ¯å®ç°**ï¼š
- åç«¯èšåˆç»Ÿè®¡æ•°æ®
- å‰ç«¯ä½¿ç”¨ ECharts/Chart.js å¯è§†åŒ–

**ä¼˜å…ˆçº§**ï¼šâ­ ä½ï¼ˆéœ€è¦å‰ç«¯é…åˆï¼‰
**é¢„è®¡è€—æ—¶**ï¼š2å¤©

---

### ä¸‰ã€å®‰å…¨æ€§å¢å¼º

#### 3.1 é˜²æ­¢æ¶æ„çˆ¬è™«

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
/**
 * æ¥å£é™æµ
 */
@RateLimiter(key = "job:list", time = 60, count = 100)
@GetMapping
public Result<Page<JobResponse>> getJobList(JobQueryRequest request) {
    // ...
}
```

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

---

#### 3.2 æ•æ„Ÿæ“ä½œå®¡è®¡æ—¥å¿—

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
@Aspect
@Component
public class JobAuditLogAspect {

    @Around("@annotation(auditable)")
    public Object audit(ProceedingJoinPoint pjp) throws Throwable {
        // è®°å½•å®¡è®¡æ—¥å¿—
        String operation = pjp.getSignature().getName();
        Object[] args = pjp.getArgs();
        Authentication auth = SecurityContextHolder.getContext().getAuthentication();

        log.info("èŒä½æ“ä½œå®¡è®¡ï¼šoperation={}, operator={}, args={}",
            operation, auth.getName(), Arrays.toString(args));

        return pjp.proceed();
    }
}
```

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

---

### å››ã€æ€§èƒ½ä¼˜åŒ–

#### 4.1 æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

**æ£€æŸ¥ç°æœ‰ç´¢å¼•**ï¼š
```sql
-- æŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µ
EXPLAIN SELECT * FROM jobs WHERE status = 'PUBLISHED' ORDER BY created_at DESC;
```

**å»ºè®®æ·»åŠ çš„ç´¢å¼•**ï¼š
```sql
-- å¤åˆç´¢å¼•ï¼šçŠ¶æ€ + åˆ›å»ºæ—¶é—´
CREATE INDEX idx_status_created ON jobs(status, created_at DESC);

-- å¤åˆç´¢å¼•ï¼šçŠ¶æ€ + æµè§ˆæ¬¡æ•°
CREATE INDEX idx_status_viewcount ON jobs(status, view_count DESC);

-- è¦†ç›–ç´¢å¼•ï¼šå¸¸ç”¨æŸ¥è¯¢å­—æ®µ
CREATE INDEX idx_status_cover ON jobs(status, id, title, salary_min, salary_max);
```

**ä¼˜å…ˆçº§**ï¼šé«˜
**é¢„è®¡è€—æ—¶**ï¼š30åˆ†é’Ÿ

---

#### 4.2 æŸ¥è¯¢ä¼˜åŒ–

**é—®é¢˜**ï¼š`getJobList()` ä¸­ä½¿ç”¨äº† `or()` å¯èƒ½å¯¼è‡´å…¨è¡¨æ‰«æ

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
```java
// âŒ å½“å‰å†™æ³•ï¼ˆå¯èƒ½å…¨è¡¨æ‰«æï¼‰
if (StringUtils.hasText(request.getKeyword())) {
    queryWrapper.and(wrapper -> wrapper
            .like(Job::getTitle, request.getKeyword())
            .or()
            .like(Job::getDescription, request.getKeyword())
            .or()
            .like(Job::getRequirements, request.getKeyword())
    );
}

// âœ… ä¼˜åŒ–ï¼šä½¿ç”¨å…¨æ–‡ç´¢å¼•
if (StringUtils.hasText(request.getKeyword())) {
    // åˆ©ç”¨ FULLTEXT INDEX ft_content
    queryWrapper.apply("MATCH(title, description, requirements) AGAINST({0} IN BOOLEAN MODE)",
        request.getKeyword());
}
```

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

---

#### 4.3 ç¼“å­˜é¢„çƒ­

**å®ç°æ–¹æ¡ˆ**ï¼š
```java
/**
 * åº”ç”¨å¯åŠ¨æ—¶é¢„çƒ­ç¼“å­˜
 */
@Component
public class JobCacheWarmer {

    @EventListener(ApplicationReadyEvent.class)
    public void warmUpCache() {
        log.info("å¼€å§‹é¢„çƒ­èŒä½ç¼“å­˜...");

        // é¢„çƒ­çƒ­é—¨èŒä½
        List<JobResponse> hotJobs = jobService.getHotJobs(20);
        redisTemplate.opsForValue().set(
            RedisKeyConstants.CACHE_JOB_HOT_KEY,
            objectMapper.writeValueAsString(hotJobs),
            10, TimeUnit.MINUTES
        );

        log.info("èŒä½ç¼“å­˜é¢„çƒ­å®Œæˆ");
    }
}
```

**ä¼˜å…ˆçº§**ï¼šä½
**é¢„è®¡è€—æ—¶**ï¼š30åˆ†é’Ÿ

---

### äº”ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### 5.1 èŒä½è¯¦æƒ…é¡µå¢åŠ "ç›¸ä¼¼èŒä½"

**æ¥å£**ï¼š
```java
/**
 * ç›¸ä¼¼èŒä½æ¨è
 * GET /api/v1/jobs/{id}/similar
 */
@GetMapping("/{id}/similar")
public Result<List<JobResponse>> getSimilarJobs(@PathVariable Long id,
                                                @RequestParam(defaultValue = "5") Integer limit) {
    List<JobResponse> similarJobs = jobService.getSimilarJobs(id, limit);
    return Result.success(similarJobs);
}
```

**å®ç°é€»è¾‘**ï¼š
- åŸºäºç›¸åŒéƒ¨é—¨
- åŸºäºç›¸ä¼¼æŠ€èƒ½ï¼ˆrequired_skills é‡åˆåº¦ï¼‰
- åŸºäºè–ªèµ„èŒƒå›´ç›¸è¿‘

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

---

#### 5.2 èŒä½æµè§ˆå†å²

**åŠŸèƒ½æè¿°**ï¼šè®°å½•ç”¨æˆ·æµè§ˆè¿‡çš„èŒä½ï¼Œæ–¹ä¾¿å¿«é€Ÿå›è®¿

**æ¥å£**ï¼š
```java
/**
 * æµè§ˆå†å²
 * GET /api/v1/jobs/browse-history
 */
@GetMapping("/browse-history")
public Result<List<JobResponse>> getBrowseHistory(Authentication authentication) {
    Long userId = (Long) authentication.getPrincipal();
    List<JobResponse> history = jobService.getBrowseHistory(userId);
    return Result.success(history);
}
```

**ä¼˜å…ˆçº§**ï¼šä½
**é¢„è®¡è€—æ—¶**ï¼š1.5å°æ—¶

---

### å…­ã€æµ‹è¯•å’Œæ–‡æ¡£

#### 6.1 å•å…ƒæµ‹è¯•è¡¥å……

**ç¼ºå¤±çš„æµ‹è¯•**ï¼š
```java
@SpringBootTest
class JobServiceTest {

    @Test
    void testCreateJob() {
        // æµ‹è¯•åˆ›å»ºèŒä½
    }

    @Test
    void testUpdateJob() {
        // æµ‹è¯•æ›´æ–°èŒä½
    }

    @Test
    void testPublishJob() {
        // æµ‹è¯•å‘å¸ƒèŒä½
    }

    @Test
    void testDeleteJob() {
        // æµ‹è¯•åˆ é™¤èŒä½
    }

    @Test
    void testJobListPagination() {
        // æµ‹è¯•åˆ†é¡µæŸ¥è¯¢
    }
}
```

**ä¼˜å…ˆçº§**ï¼šé«˜
**é¢„è®¡è€—æ—¶**ï¼š2å°æ—¶

---

#### 6.2 API æ–‡æ¡£å®Œå–„

**ä½¿ç”¨ Swagger/OpenAPI æ³¨è§£**ï¼š
```java
@Operation(summary = "åˆ›å»ºèŒä½", description = "åˆ›å»ºä¸€ä¸ªæ–°çš„èŒä½")
@ApiResponses({
    @ApiResponse(responseCode = "200", description = "åˆ›å»ºæˆåŠŸ"),
    @ApiResponse(responseCode = "400", description = "å‚æ•°é”™è¯¯"),
    @ApiResponse(responseCode = "401", description = "æœªç™»å½•")
})
@PostMapping
public Result<Long> createJob(@Valid @RequestBody CreateJobRequest request) {
    // ...
}
```

**ä¼˜å…ˆçº§**ï¼šä¸­
**é¢„è®¡è€—æ—¶**ï¼š1å°æ—¶

---

## ğŸ“ ä¼˜åŒ–è®¡åˆ’å»ºè®®

### ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆç«‹å³ä¿®å¤ï¼‰
1. åˆ†é¡µå‚æ•°æ ¡éªŒ
2. æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
3. å•å…ƒæµ‹è¯•è¡¥å……

### ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆæœ¬å‘¨å®Œæˆï¼‰
1. æµè§ˆæ¬¡æ•°å¼‚æ­¥æ›´æ–°
2. èŒä½å¤åˆ¶åŠŸèƒ½
3. æ‰¹é‡æ“ä½œåŠŸèƒ½

### ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼ˆæœ¬æœˆå®Œæˆï¼‰
1. èŒä½çŠ¶æ€æµè½¬è®°å½•
2. èŒä½æ”¶è—åŠŸèƒ½
3. èŒä½ç”³è¯·ç»Ÿè®¡
4. æ¥å£é™æµ

### ç¬¬å››ä¼˜å…ˆçº§ï¼ˆåç»­è§„åˆ’ï¼‰
1. Elasticsearch æœç´¢
2. æ¨èå¼•æ“
3. æ•°æ®åˆ†æçœ‹æ¿

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.1
**æœ€åæ›´æ–°**ï¼š2026-02-19
**çŠ¶æ€**ï¼šå·²æ·»åŠ ä¼˜åŒ–å’Œæ‰©å±•åŠŸèƒ½æ¸…å•
