# SmartATS 开发环境信息

> 创建日期: 2026-02-14
> 用途: 记录所有服务的连接信息，方便后续开发

---

## 🐳 Docker 容器管理

```bash
# 进入项目目录
cd /Users/nissoncx/code/SmartATS

# 启动所有服务
docker-compose up -d

# 停止所有服务
docker-compose stop

# 查看服务状态
docker-compose ps

# 查看某个服务的日志
docker-compose logs mysql
docker-compose logs redis
docker-compose logs rabbitmq
docker-compose logs minio

# 完全删除所有容器（数据保留）
docker-compose down

# 完全删除所有容器和数据（⚠️ 数据会丢失）
docker-compose down -v
```

---

## 📊 服务连接信息

### 1. MySQL 数据库

| 属性 | 值 |
|------|-----|
| **容器名** | smartats-mysql |
| **主机地址** | localhost |
| **端口** | 3307 |
| **数据库** | smartats |
| **用户名** | smartats |
| **密码** | smartats123 |
| **Root密码** | root123 |

#### 命令行连接
```bash
docker exec -it smartats-mysql mysql -usmartats -psmartats123 smartats
```

#### JDBC 连接字符串
```
jdbc:mysql://localhost:3307/smartats?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=utf8mb4
```

#### 数据库表
- `users` - 用户表
- `jobs` - 职位表
- `resumes` - 简历文件表
- `candidates` - 候选人表（AI提取的结构化数据）
- `job_applications` - 职位申请表
- `interview_records` - 面试记录表

---

### 2. Redis 缓存

| 属性 | 值 |
|------|-----|
| **容器名** | smartats-redis |
| **主机地址** | localhost |
| **端口** | 6379 |
| **密码** | redis123 |

#### 命令行连接
```bash
docker exec -it smartats-redis redis-cli -a redis123
```

#### 常用命令
```bash
# 测试连接
docker exec smartats-redis redis-cli -a redis123 PING

# 查看所有key
docker exec smartats-redis redis-cli -a redis123 KEYS '*'

# 清空所有数据（开发调试用）
docker exec smartats-redis redis-cli -a redis123 FLUSHALL
```

---

### 3. RabbitMQ 消息队列

| 属性 | 值 |
|------|-----|
| **容器名** | smartats-rabbitmq |
| **主机地址** | localhost |
| **AMQP端口** | 5672 |
| **管理界面** | 15672 |
| **用户名** | admin |
| **密码** | admin123 |
| **Virtual Host** | smartats |

#### 管理界面
```
URL: http://localhost:15672
用户名: admin
密码: admin123
```

#### 连接配置
```yaml
spring:
  rabbitmq:
    host: localhost
    port: 5672
    username: admin
    password: admin123
    virtual-host: smartats
```

---

### 4. MinIO 对象存储

| 属性 | 值 |
|------|-----|
| **容器名** | smartats-minio |
| **API地址** | http://localhost:9000 |
| **控制台地址** | http://localhost:9001 |
| **Access Key** | admin |
| **Secret Key** | admin123456 |

#### 控制台登录
```
URL: http://localhost:9001
Access Key: admin
Secret Key: admin123456
```

#### 连接配置
```yaml
minio:
  endpoint: http://localhost:9000
  accessKey: admin
  secretKey: admin123456
  bucketName: smartats-resumes
```

---

## 🧪 环境验证命令

```bash
# 验证所有服务健康状态
docker-compose ps

# 验证 MySQL
docker exec smartats-mysql mysql -usmartats -psmartats123 smartats -e "SELECT COUNT(*) FROM users;"

# 验证 Redis
docker exec smartats-redis redis-cli -a redis123 PING

# 验证 RabbitMQ（访问管理界面）
open http://localhost:15672

# 验证 MinIO（访问控制台）
open http://localhost:9001
```

---

## 📝 测试账号

### 数据库中预置的用户

| 用户名 | 密码 | 角色 | 邮箱 |
|--------|------|------|------|
| admin | password123 | ADMIN | admin@smartats.com |
| hr01 | password123 | HR | hr01@smartats.com |

> 注意：密码是 `password123`（已在数据库中用 BCrypt 加密存储）

---

## 🔧 常见问题

### 端口冲突
- 如果 3307 端口被占用，修改 `docker-compose.yml` 中的端口映射
- 格式: `"外部端口:内部端口"`，例如 `"3308:3306"`

### 容器无法启动
```bash
# 查看详细日志
docker-compose logs [服务名]

# 重建容器
docker-compose down
docker-compose up -d
```

### 数据重置
```bash
# ⚠️ 这会删除所有数据！
docker-compose down -v
docker-compose up -d
```

---

## 📌 重要提示

1. **MySQL 使用 3307 端口**（因为本地 MySQL 占用了 3306）
2. **所有密码仅用于开发环境**，生产环境务必修改
3. **数据持久化**：所有数据都存储在 `./data/` 目录下
4. **重启电脑后**：需要重新执行 `docker-compose up -d` 启动服务

---

*本文档自动生成于项目初始化时*
